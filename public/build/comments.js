(()=>{"use strict";!function(){function e(e){var t=document.querySelector("#comment-parent-id");void 0!==t&&(t.value=e)}document.addEventListener("click",(function(e){if(e.target.matches(".ajax_like")){e.preventDefault();var t=new FormData;t.set("_csrf",getCSRFToken()),fetch(e.target.dataset.url,{method:"POST",credentials:"same-origin",body:t,headers:{"X-Requested-With":"XMLHttpRequest"}}).then((function(e){if(!e.ok)throw Error(e.statusText);return e})).then((function(e){return e.text()})).then((function(t){document.querySelector("#"+e.target.dataset.load).innerHTML=t})).catch((function(e){console.log(e)}))}})),function(){var t=document.querySelector("#comment-form"),n=document.querySelectorAll(".comment .reply");[].forEach.call(n,(function(e){var t=document.createElement("a");t.classList.add("reply"),t.dataset.id=e.dataset.id,t.href="#comment-form",t.innerText=e.innerText,e.parentNode.replaceChild(t,e)}));var r=document.querySelectorAll(".comment .reply");[].forEach.call(r,(function(n){n.addEventListener("click",(function(){var r=n.parentNode.parentNode;t.parentElement.removeChild(t),t.style["margin-left"]=parseInt(r.style["margin-left"])+20+"px",r.after(t);var a=parseInt(this.dataset.id);return t.querySelector("form").setAttribute("action","#comment_"+a),e(a),!1}))}));var a=document.querySelector(".reply-comment");a&&a.addEventListener("click",(function(){return t.parentElement.removeChild(t),t.style["margin-left"]=0,this.after(t),e(0),!1}))}()}()})();