!function(){function n(e){var t=document.querySelector("#comment-parent-id");void 0!==t&&(t.value=e)}var r,e;document.addEventListener("click",function(t){var e;t.target.matches(".ajax_like")&&(t.preventDefault(),(e=new FormData).set("_csrf",getCSRFToken()),fetch(t.target.dataset.url,{method:"POST",credentials:"same-origin",body:e,headers:{"X-Requested-With":"XMLHttpRequest"}}).then(function(e){if(!e.ok)throw Error(e.statusText);return e}).then(function(e){return e.text()}).then(function(e){document.querySelector("#"+t.target.dataset.load).innerHTML=e}).catch(function(e){console.log(e)}))}),r=document.querySelector("#comment-form"),e=document.querySelectorAll(".comment .reply"),[].forEach.call(e,function(e){var t=document.createElement("a");t.classList.add("reply"),t.dataset.id=e.dataset.id,t.href="#comment-form",t.innerText=e.innerText,e.parentNode.replaceChild(t,e)}),e=document.querySelectorAll(".comment .reply"),[].forEach.call(e,function(t){t.addEventListener("click",function(){var e=t.parentNode.parentNode;r.parentElement.removeChild(r),r.style["margin-left"]=parseInt(e.style["margin-left"])+20+"px",e.after(r);e=parseInt(this.dataset.id);return r.querySelector("form").setAttribute("action","#comment_"+e),n(e),!1})}),(e=document.querySelector(".reply-comment"))&&e.addEventListener("click",function(){return r.parentElement.removeChild(r),r.style["margin-left"]=0,this.after(r),n(0),!1})}();