(()=>{"use strict";const e=function(){return document.querySelector('meta[name="csrf-token"]').getAttribute("content")};!function(){function t(e){var t=document.querySelector("#comment-parent-id");void 0!==t&&(t.value=e)}document.addEventListener("click",(function(t){if(t.target.matches(".ajax-like")){t.preventDefault();var n=new FormData;n.set("_csrf",e()),fetch(t.target.dataset.url,{method:"POST",credentials:"same-origin",body:n,headers:{"X-Requested-With":"XMLHttpRequest"}}).then((function(e){if(!e.ok)throw Error(e.statusText);return e})).then((function(e){return e.text()})).then((function(e){document.querySelector("#"+t.target.dataset.load).innerHTML=e})).catch((function(e){console.log(e)}))}})),function(){var e=document.querySelector("#comment-form"),n=document.querySelectorAll(".comment .reply");[].forEach.call(n,(function(e){var t=document.createElement("a");t.classList.add("reply"),t.dataset.id=e.dataset.id,t.href="#comment-form",t.innerText=e.innerText,e.parentNode.replaceChild(t,e)}));var r=document.querySelectorAll(".comment .reply");[].forEach.call(r,(function(n){n.addEventListener("click",(function(){var r=n.parentNode.parentNode;e.parentElement.removeChild(e),e.style["margin-left"]=parseInt(r.style["margin-left"])+20+"px",r.after(e);var o=parseInt(this.dataset.id);return e.querySelector("form").setAttribute("action","#comment_"+o),t(o),!1}))}));var o=document.querySelector(".reply-comment");o&&o.addEventListener("click",(function(){return e.parentElement.removeChild(e),e.style["margin-left"]=0,this.after(e),t(0),!1}))}()}()})();